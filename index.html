<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="favicon.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Petrdex</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
      /* ------------------ Your existing styles ------------------ */
      body {
        background: #f5e6d3;
        background-image: 
          radial-gradient(circle at 20% 30%, rgba(139, 69, 19, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 80% 70%, rgba(160, 82, 45, 0.05) 0%, transparent 50%),
          repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(139, 69, 19, 0.03) 1px, rgba(139, 69, 19, 0.03) 2px),
          repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(160, 82, 45, 0.02) 1px, rgba(160, 82, 45, 0.02) 2px),
          linear-gradient(135deg, rgba(245, 230, 211, 0.8) 0%, rgba(250, 240, 220, 0.8) 100%);
        min-height: 100vh;
        margin: 0;
        padding: 0;
        position: relative;
        font-family: 'Press Start 2P', monospace;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: 
          url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 10h80v80h-80z' fill='none' stroke='%23d4a574' stroke-width='0.5' opacity='0.1'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 0;
      }

      body > * { position: relative; z-index: 1; }

      #welcome-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #f5e6d3;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 1;
        transition: all 0.8s ease-out;
      }

      #welcome-screen.fade-out { 
        opacity: 0;
        pointer-events: none;
      }
      
      #welcome-screen.hidden { 
        display: none;
      }

      #welcome-text {
        font-size: 3em;
        font-weight: bold;
        color: #5a4a3a;
        font-family: 'Press Start 2P', monospace;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      }

      .nav-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
        padding-top: 20px;
      }

      .nav-btn {
        padding: 10px 20px;
        border: 2px solid #d4a574;
        border-radius: 8px;
        background: #f5e6d3;
        color: #6b5a4a;
        font-family: 'Press Start 2P', monospace;
        font-size: 0.7em;
        font-weight: bold;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.2s;
        display: inline-block;
      }

      .nav-btn:hover {
        background: #e8d5c0;
        color: #5a4a3a;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(139,69,19,0.3);
      }

      #homepage-content {
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 20px;
        font-family: 'Press Start 2P', monospace;
        color: #5a4a3a;
        position: relative;
        z-index: 1;
      }

      #homepage-content h1 { 
        text-align: center; font-size:1.8em; margin-bottom:30px; 
        text-shadow:2px 2px 4px rgba(0,0,0,0.2); 
      }

      #homepage-content p, #homepage-content li { font-size:0.7em; line-height:1.8; color:#6b5a4a; }
      #homepage-content ul { list-style-type: disc; margin-left:30px; margin-bottom:20px; }
      #homepage-content li { margin-bottom:15px; }
      #homepage-content .tagline { text-align:center; font-size:0.9em; margin-top:40px; text-shadow:1px 1px 2px rgba(0,0,0,0.1); }

      #homepage-content .nav-button {
        display:block; width:fit-content; margin:40px auto 0; padding:15px 40px;
        background:#d4a574; color:#fff; text-decoration:none; border-radius:8px;
        font-size:0.8em; font-weight:bold; text-align:center; border:2px solid #b8945f;
        box-shadow:0 4px 15px rgba(139,69,19,0.3); transition: all 0.3s ease;
      }
      #homepage-content .nav-button:hover {
        transform:translateY(-3px); box-shadow:0 6px 20px rgba(139,69,19,0.4);
        background:#b8945f; border-color:#a0844f;
      }

      /* Page transition effects */
      .fade-out-page {
        opacity: 0 !important;
        transition: opacity 0.4s ease-out;
      }

      body {
        opacity: 1;
        transition: opacity 0.4s ease-in;
      }

      #welcome-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover; /* make sure it fills the screen without stretching */
        z-index: 0;
      }

      #welcome-screen > * {
        position: relative;
        z-index: 1; /* ensures any overlay text/buttons go above video if needed */
      }

    </style>
  </head>
  <body>
    <div id="welcome-screen">
      <video id="welcome-video" autoplay muted playsinline preload="auto">
        <source src="./mainpage-banner1.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>

    <div id="homepage-content">
      <div class="nav-buttons">
        <a href="index.html" class="nav-btn">Home</a>
        <a href="dex.html" class="nav-btn">Petrdex</a>
        <a href="profile.html" class="nav-btn">Profile</a>
        <a href="upload.html" class="nav-btn">Upload</a>
        <a href="login.html" class="nav-btn" id="loginBtn">Login</a>
      </div>

      <h1>Welcome to Petrdex â€” the ultimate archive of Petr stickers at UC Irvine!</h1>
      <p>Petrdex is a community-driven digital PokÃ©dex-style catalog dedicated to the legendary world of Petrs â€” the students who create and distribute the beloved Petr stickers you see across campus. Each Petr and sticker has its own entry, complete with sightings, variations, lore, and creator info (when known ðŸ‘€).</p>
      <p>Whether you're a collector, a trader, or simply a fan of the culture, Petrdex helps you:</p>
      <ul>
        <li>Discover rare, seasonal, and iconic Petr stickers</li>
        <li>Track your personal sticker collection</li>
        <li>Learn about the artists and the stories behind each Petr</li>
        <li>Celebrate the creativity that makes UCI's community so uniquely chaotic and wholesome</li>
      </ul>
      <p>Petrdex isn't just a database â€” it's a living record of campus culture.</p>
      <p class="tagline">Catch them. Collect them. Cherish them.</p>
      <a href="dex.html" class="nav-button">Explore the Petrdex Gallery â†’</a>
    </div>

    <script>
      // ---------------- Welcome screen fade ----------------
      window.addEventListener('load', function() {
        const welcomeScreen = document.getElementById('welcome-screen');
        const welcomeVideo = document.getElementById('welcome-video');
        const homepageContent = document.getElementById('homepage-content');

        // Initially hide homepage content
        homepageContent.style.opacity = '0';
        homepageContent.style.transition = 'opacity 1s ease-in';

        // Error handling for video
        welcomeVideo.addEventListener('error', function(e) {
          console.error('Error loading video:', e);
          // If video fails, show homepage immediately
          showHomepage();
        });

        // Ensure video plays
        welcomeVideo.play().catch(function(e) {
          console.error('Error playing video:', e);
          // If autoplay fails, show homepage
          showHomepage();
        });

        // When video ends, fade out welcome screen and show homepage
        welcomeVideo.addEventListener('ended', function() {
          showHomepage();
        });

        function showHomepage() {
          welcomeScreen.classList.add('fade-out');
          // Show homepage content with minimal delay
          setTimeout(() => {
            homepageContent.style.opacity = '1';
            // Remove welcome screen from DOM after fade
            setTimeout(() => {
              welcomeScreen.classList.add('hidden');
            }, 800);
          }, 200);
        }
      });

      // ---------------- Page Transition ----------------
      document.querySelector('.nav-button').addEventListener('click', function(e) {
        e.preventDefault(); // Prevent immediate navigation
        const targetHref = this.getAttribute('href');
        
        // Fade out the current page
        document.body.classList.add('fade-out-page');
        
        // Navigate after fade animation
        setTimeout(() => {
          window.location.href = targetHref;
        }, 400);
      });

      // Ensure page fades in when loaded
      document.body.style.opacity = '1';

      // ---------------- Login/Logout Button ----------------
      const loginBtn = document.getElementById('loginBtn');

      function updateLoginButton() {
        const user = localStorage.getItem('loggedInUser');
        loginBtn.textContent = user ? 'Logout' : 'Login';
      }

      // Update button on page load
      window.addEventListener('load', updateLoginButton);

      loginBtn.addEventListener('click', function(e) {
        const user = localStorage.getItem('loggedInUser');
        if (user) {
          e.preventDefault(); // prevent navigation
          localStorage.removeItem('loggedInUser');
          loginBtn.textContent = 'Login';
          alert('You have been logged out!');
        }
        // else: user is not logged in â†’ follow link to login.html
      });
    </script>
  </body>
</html>
