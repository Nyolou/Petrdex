<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="favicon.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Petrdex</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
      /* ------------------ Your existing styles ------------------ */
      body {
        background: #f5e6d3;
        background-image: 
          radial-gradient(circle at 20% 30%, rgba(139, 69, 19, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 80% 70%, rgba(160, 82, 45, 0.05) 0%, transparent 50%),
          repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(139, 69, 19, 0.03) 1px, rgba(139, 69, 19, 0.03) 2px),
          repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(160, 82, 45, 0.02) 1px, rgba(160, 82, 45, 0.02) 2px),
          linear-gradient(135deg, rgba(245, 230, 211, 0.8) 0%, rgba(250, 240, 220, 0.8) 100%);
        min-height: 100vh;
        margin: 0;
        padding: 0;
        position: relative;
        font-family: 'Press Start 2P', monospace;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: 
          url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 10h80v80h-80z' fill='none' stroke='%23d4a574' stroke-width='0.5' opacity='0.1'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 0;
      }

      body > * { position: relative; z-index: 1; }

      #welcome-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #f5e6d3;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 1;
        transition: all 0.8s ease-out;
      }

      #welcome-screen.fade-out { 
        opacity: 0;
        pointer-events: none;
      }
      
      #welcome-screen.hidden { 
        display: none;
      }

      #welcome-text {
        font-size: 3em;
        font-weight: bold;
        color: #5a4a3a;
        font-family: 'Press Start 2P', monospace;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      }

      .nav-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
        padding-top: 20px;
      }

      .nav-btn {
        padding: 10px 20px;
        border: 2px solid #d4a574;
        border-radius: 8px;
        background: #f5e6d3;
        color: #6b5a4a;
        font-family: 'Press Start 2P', monospace;
        font-size: 0.7em;
        font-weight: bold;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.2s;
        display: inline-block;
      }

      .nav-btn:hover {
        background: #e8d5c0;
        color: #5a4a3a;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(139,69,19,0.3);
      }

      #homepage-content {
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 20px;
        font-family: 'Press Start 2P', monospace;
        color: #5a4a3a;
        position: relative;
        z-index: 1;
      }

      #homepage-content h1 { 
        text-align: center; font-size:1.8em; margin-bottom:30px; 
        text-shadow:2px 2px 4px rgba(0,0,0,0.2); 
      }

      #homepage-content p, #homepage-content li { font-size:0.7em; line-height:1.8; color:#6b5a4a; }
      #homepage-content ul { list-style-type: disc; margin-left:30px; margin-bottom:20px; }
      #homepage-content li { margin-bottom:15px; }
      #homepage-content .tagline { text-align:center; font-size:0.9em; margin-top:40px; text-shadow:1px 1px 2px rgba(0,0,0,0.1); }

      #homepage-content .nav-button {
        display:block; width:fit-content; margin:40px auto 0; padding:15px 40px;
        background:#d4a574; color:#fff; text-decoration:none; border-radius:8px;
        font-size:0.8em; font-weight:bold; text-align:center; border:2px solid #b8945f;
        box-shadow:0 4px 15px rgba(139,69,19,0.3); transition: all 0.3s ease;
      }
      #homepage-content .nav-button:hover {
        transform:translateY(-3px); box-shadow:0 6px 20px rgba(139,69,19,0.4);
        background:#b8945f; border-color:#a0844f;
      }

      /* Page transition effects */
      .fade-out-page {
        opacity: 0 !important;
        transition: opacity 0.3s ease-out;
      }

      body {
        opacity: 1;
        transition: opacity 0.3s ease-in;
      }

      #welcome-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover; /* make sure it fills the screen without stretching */
        z-index: 0;
      }

      #welcome-screen > * {
        position: relative;
        z-index: 1; /* ensures any overlay text/buttons go above video if needed */
      }

      #welcome-screen #skip-btn {
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 2;
      }

            /* Separator for calendar */
      .separator {
        text-align: center;
        margin: 30px 0;
        font-size: 0.8em;
        color: #b8945f;
      }
      .separator:before,
      .separator:after {
        content: 'â˜…';
        margin: 0 5px;
      }

      /* Separator styling */
      .separator {
        text-align: center;
        margin: 40px auto;
        font-size: 1.5em;
        position: relative;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: bold;
        padding: 15px 30px;
        width: fit-content;
        background: rgba(252, 244, 234, 0.95);
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(139, 69, 19, 0.15);
        border: 3px solid;
      }

      /* Dynamic quarter gradients for separator */
      .separator.fall { 
        border-image: linear-gradient(45deg, #FFD700, #FFA500, #FF4500) 1;
        color: #FF4500;
      }
      .separator.winter { 
        border-image: linear-gradient(45deg, #00BFFF, #1E90FF, #00008B) 1;
        color: #1E90FF;
      }
      .separator.spring { 
        border-image: linear-gradient(45deg, #32CD32, #7CFC00, #ADFF2F) 1;
        color: #32CD32;
      }
      .separator.summer { 
        border-image: linear-gradient(45deg, #FF69B4, #FF1493, #C71585) 1;
        color: #FF1493;
      }

      .separator::before,
      .separator::after {
        content: 'â˜…';
        display: inline-block;
        margin: 0 15px;
        font-size: 1.2em;
        animation: spinStar 2s infinite ease-in-out;
        position: relative;
        top: -2px;
      }

      .separator::before {
        animation-delay: 0s;
      }

      .separator::after {
        animation-delay: 1s;
      }

      @keyframes spinStar {
        0% { 
          transform: scale(1) rotate(0deg); 
          opacity: 0.7;
        }
        50% { 
          transform: scale(1.3) rotate(180deg); 
          opacity: 1;
        }
        100% { 
          transform: scale(1) rotate(360deg); 
          opacity: 0.7;
        }
      }

      /* Add sparkle effect to title */
      .separator span {
        position: relative;
        display: inline-block;
        animation: shimmer 3s infinite;
        background-image: linear-gradient(
          -45deg,
          rgba(255,255,255,0) 0%,
          rgba(255,255,255,0.8) 50%,
          rgba(255,255,255,0) 100%
        );
        background-size: 200% 100%;
        background-position: 100% 0;
        background-clip: text;
        -webkit-background-clip: text;
      }

      @keyframes shimmer {
        0% {
          background-position: 100% 0;
        }
        70% {
          background-position: -100% 0;
        }
        100% {
          background-position: -100% 0;
        }
      }

      /* Calendar container */
      .calendar {
        max-width: 1100px;
        margin: 0 auto 60px;
        border: 4px solid;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(139,69,19,0.3);
        background: #fff8f0;
      }

      /* Dynamic quarter border gradients */
      .calendar.fall { border-image: linear-gradient(to right, #FFD700, #FFA500, #FF4500) 1; }
      .calendar.winter { border-image: linear-gradient(to right, #00BFFF, #1E90FF, #00008B) 1; }
      .calendar.spring { border-image: linear-gradient(to right, #32CD32, #7CFC00, #ADFF2F) 1; }
      .calendar.summer { border-image: linear-gradient(to right, #FF69B4, #FF1493, #C71585) 1; }

      /* Drop cell content styling */
      .calendar td.drop .drop-date {
        font-size: 1.1em;
        font-weight: bold;
        margin-bottom: 2px;
      }

      .calendar td.drop .drop-name {
        font-size: 0.8em;
        margin-bottom: 4px;
        color: #b84c00;
      }

      .calendar td.drop .drop-time {
        font-size: 0.7em;
        color: #666;
        font-style: italic;
        opacity: 0.8;
      }

      .calendar table {
        width: 100%;
        border-collapse: collapse;
        text-align: center;
      }
      .calendar th, .calendar td {
        padding: 18px;
        border: 1px solid #d4a574;
        font-size: 1em;
      }
      .calendar th {
        background: #f5e6d3;
      }
      .calendar td.drop {
        background: #ffe4b5;
        border-radius: 8px;
        color: #b84c00;
        font-weight: bold;
        padding: 15px;
      }
      /* Calendar navigation header */
      .calendar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #f5e6d3;
        padding: 15px 20px;
        font-size: 1.2em;
        font-weight: bold;
        color: #5a4a3a;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      }
      .calendar-header button {
        font-family: 'Press Start 2P', monospace;
        font-size: 0.7em;
        padding: 5px 10px;
        border: 2px solid #d4a574;
        border-radius: 8px;
        background: #f5e6d3;
        color: #6b5a4a;
        cursor: pointer;
        transition: all 0.2s;
      }
      .calendar-header button:hover {
        background: #e8d5c0;
        transform: translateY(-1px);
        box-shadow: 0 2px 6px rgba(139,69,19,0.3);
      }

      /* Small sticker icon in calendar drops */
      .calendar td.drop {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 5px;
      }

      .calendar td.drop img {
        width: 40px;
        height: 40px;
        margin-bottom: 8px;
      }
      /* Enhanced bounce animation for sticker icons */
      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0) rotate(0deg); }
        40% { transform: translateY(-12px) rotate(-5deg); }
        60% { transform: translateY(-6px) rotate(5deg); }
      }

      .calendar td.drop img {
        animation: bounce 1.2s ease infinite;
        animation-fill-mode: both;
        transition: all 0.3s ease;
        filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
      }

      .calendar td.drop img:hover {
        transform: translateY(-5px) scale(1.15) rotate(5deg);
        filter: drop-shadow(0 8px 16px rgba(0,0,0,0.3));
      }

      /* Confetti bursts behind sticker drops */
      .calendar td.drop {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 5px;
        background: radial-gradient(circle at 50% 50%, 
          rgba(255, 223, 186, 0.4) 0%, 
          rgba(255, 180, 100, 0.2) 50%,
          transparent 70%);
        border-radius: 8px;
        transition: all 0.4s ease;
        overflow: visible;
      }

      .calendar td.drop:hover {
        background: radial-gradient(circle at 50% 50%, 
          rgba(255, 223, 186, 0.7) 0%, 
          rgba(255, 180, 100, 0.4) 50%,
          rgba(255, 150, 50, 0.2) 70%);
        transform: scale(1.02);
      }

      /* Enhanced confetti animation */
      @keyframes confettiFloat {
        0%, 100% { 
          transform: translate(0, 0) rotate(0deg) scale(1); 
          opacity: 0.8; 
        }
        25% { 
          transform: translate(5px, -10px) rotate(45deg) scale(1.1); 
          opacity: 1; 
        }
        50% { 
          transform: translate(-5px, -5px) rotate(-45deg) scale(0.9); 
          opacity: 0.9; 
        }
        75% { 
          transform: translate(3px, -8px) rotate(20deg) scale(1.05); 
          opacity: 0.95; 
        }
      }

      .calendar td.drop span {
        position: absolute;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        animation: confettiFloat 3s infinite ease-in-out;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .calendar td.drop:hover span {
        opacity: 1;
      }

      .calendar td.drop span {
        animation: confettiWiggle 2s infinite ease-in-out;
      }

      /* Footer bar styling */
      .footer-bar {
        width: 100%;
        padding: 20px 0;
        background: linear-gradient(
          to right,
          rgba(245, 230, 211, 0) 0%,
          rgba(245, 230, 211, 0.95) 20%,
          rgba(245, 230, 211, 0.95) 80%,
          rgba(245, 230, 211, 0) 100%
        );
        text-align: center;
        position: relative;
        margin-top: 60px;
      }

      .footer-bar::before,
      .footer-bar::after {
        content: '';
        position: absolute;
        top: 50%;
        width: 250px;
        height: 2px;
        background: linear-gradient(
          to right,
          rgba(139, 69, 19, 0) 0%,
          rgba(139, 69, 19, 0.4) 100%
        );
      }

      .footer-bar::before {
        right: 60%;
      }

      .footer-bar::after {
        left: 60%;
      }

      .footer-logo {
        font-size: 1.8em;
        color: #5a4a3a;
        font-family: 'Press Start 2P', monospace;
        text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.2);
        position: relative;
        display: inline-block;
      }

      .footer-logo::before,
      .footer-logo::after {
        content: 'âœ§';
        font-size: 0.7em;
        color: #d4a574;
        position: relative;
        top: -5px;
        margin: 0 15px;
        animation: twinkleSmall 1.5s infinite ease-in-out alternate;
      }

      @keyframes twinkleSmall {
        0% { transform: scale(1) rotate(0deg); opacity: 0.5; }
        100% { transform: scale(1.2) rotate(15deg); opacity: 1; }
      }

    </style>
  </head>
  <body>
    <div id="welcome-screen">
      <video id="welcome-video" autoplay muted playsinline preload="auto">
        <source src="./mainpage-banner1.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <a href="index.html" id="skip-btn" class="nav-btn">Skip â†’</a>
    </div>

    <div id="homepage-content">
      <div class="nav-buttons">
        <a href="index.html" class="nav-btn">Home</a>
        <a href="dex.html" class="nav-btn">Petrdex</a>
        <a href="userprofile.html" class="nav-btn">Profile</a>
        <a href="upload.html" class="nav-btn">Upload</a>
        <a href="login.html" class="nav-btn" id="loginBtn">Login</a>
      </div>

      <h1>Welcome to Petrdex â€” the ultimate archive of Petr stickers at UC Irvine!</h1>
      <p>Petrdex is a community-driven digital PokÃ©dex-style catalog dedicated to the legendary world of Petrs â€” the students who create and distribute the beloved Petr stickers you see across campus. Each Petr and sticker has its own entry, complete with sightings, variations, lore, and creator info (when known ðŸ‘€).</p>
      <p>Whether you're a collector, a trader, or simply a fan of the culture, Petrdex helps you:</p>
      <ul>
        <li>Discover rare, seasonal, and iconic Petr stickers</li>
        <li>Track your personal sticker collection</li>
        <li>Learn about the artists and the stories behind each Petr</li>
        <li>Celebrate the creativity that makes UCI's community so uniquely chaotic and wholesome</li>
      </ul>
      <p>Petrdex isn't just a database â€” it's a living record of campus culture.</p>
      <p class="tagline">Catch them. Collect them. Cherish them.</p>
      <a href="dex.html" class="nav-button">Explore the Petrdex Gallery â†’</a>

      <!-- Cute separator -->
      <div class="separator"><span>Calendar of Chaos</span></div>

      <!-- Petr Sticker Drop Calendar with Navigation (moved inside homepage-content) -->
      <div class="calendar" id="calendar">
        <div class="calendar-header">
          <button id="prevMonth" class="nav-btn">&lt; Prev</button>
          <span id="calendarTitle"></span>
          <button id="nextMonth" class="nav-btn">Next &gt;</button>
        </div>
        <div id="calendarTable"></div>
      </div>

      <!-- Footer bar -->
      <div class="footer-bar">
        <div class="footer-logo">Petrdex</div>
      </div>
    </div>


    <script>
      // ---------------- Welcome screen fade ----------------
      window.addEventListener('load', function() {
        const welcomeScreen = document.getElementById('welcome-screen');
        const welcomeVideo = document.getElementById('welcome-video');
        const homepageContent = document.getElementById('homepage-content');

        // Initially hide homepage content
        homepageContent.style.opacity = '0';
        homepageContent.style.transition = 'opacity 1s ease-in';

        // Error handling for video
        welcomeVideo.addEventListener('error', function(e) {
          console.error('Error loading video:', e);
          // If video fails, show homepage immediately
          showHomepage();
        });

        // Ensure video plays
        welcomeVideo.play().catch(function(e) {
          console.error('Error playing video:', e);
          // If autoplay fails, show homepage
          showHomepage();
        });

        // When video ends, fade out welcome screen and show homepage
        welcomeVideo.addEventListener('ended', function() {
          showHomepage();
        });

        function showHomepage() {
          welcomeScreen.classList.add('fade-out');
          // Show homepage content with minimal delay
          setTimeout(() => {
            homepageContent.style.opacity = '1';
            // Remove welcome screen from DOM after fade
            setTimeout(() => {
              welcomeScreen.classList.add('hidden');
            }, 800);
          }, 200);
        }

        // Make sure page is visible when loaded
        document.body.style.opacity = '1';
      });
        // ---------------- Skip Button functionality ----------------
        (function() {
          const skipBtn = document.getElementById('skip-btn');
          const welcomeScreen = document.getElementById('welcome-screen');
          const welcomeVideo = document.getElementById('welcome-video');
          const homepageContent = document.getElementById('homepage-content');
          let skipped = false;

          function skipVideo() {
            if (skipped) return;
            skipped = true;
            // hide skip button immediately
            if (skipBtn) skipBtn.style.display = 'none';
            // Fade out welcome screen
            welcomeScreen.classList.add('fade-out');
            // Show homepage content
            homepageContent.style.opacity = '1';
            // Remove welcome screen from DOM after fade
            setTimeout(() => {
              welcomeScreen.classList.add('hidden');
              // pause the video to free resources
              try { welcomeVideo.pause(); } catch (e) {}
            }, 800);
          }

          // Show skip button when the video actually starts playing
          if (welcomeVideo) {
            welcomeVideo.addEventListener('play', function() {
              if (skipBtn && !skipped) skipBtn.style.display = 'block';
            });

            // If video ends naturally, hide skip button
            welcomeVideo.addEventListener('ended', function() {
              if (skipBtn) skipBtn.style.display = 'none';
            });
          }

          // Click the skip button
          if (skipBtn) {
            skipBtn.addEventListener('click', function(e) {
              e.preventDefault(); // prevent default link navigation
              skipVideo();
            });
          }

          // Press Escape key to skip only while welcome screen is visible
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
              // Only skip if welcome screen is currently visible and not already skipped
              if (!welcomeScreen.classList.contains('fade-out') && !skipped) {
                skipVideo();
              }
            }
          });
        })();


      // ---------------- Page Transition ----------------
      // Add transition to all navigation links
      function handleNavigation(e) {
        const link = e.currentTarget;
        // Don't handle external links or special cases
        if (link.getAttribute('href').startsWith('http') || 
            (link.id === 'loginBtn' && localStorage.getItem('loggedInUser'))) {
          return;
        }
        
        e.preventDefault();
        const targetHref = link.getAttribute('href');
        
        // Fade out the current page
        document.body.classList.add('fade-out-page');
        
        // Navigate after fade animation
        setTimeout(() => {
          window.location.href = targetHref;
        }, 300);
      }

      // Apply to all navigation buttons (exclude the welcome-screen skip button)
      document.querySelectorAll('.nav-btn:not(#skip-btn), .nav-button').forEach(btn => {
        btn.addEventListener('click', handleNavigation);
      });

      // Ensure page fades in when loaded
      document.body.style.opacity = '1';

      // ---------------- Login/Logout Button ----------------
      const loginBtn = document.getElementById('loginBtn');

      function updateLoginButton() {
        const user = localStorage.getItem('loggedInUser');
        loginBtn.textContent = user ? 'Logout' : 'Login';
      }

      // Update button on page load
      window.addEventListener('load', updateLoginButton);

      loginBtn.addEventListener('click', function(e) {
        const user = localStorage.getItem('loggedInUser');
        if (user) {
          e.preventDefault(); // prevent navigation
          localStorage.removeItem('loggedInUser');
          loginBtn.textContent = 'Login';
          alert('You have been logged out!');
        }
        // else: user is not logged in â†’ follow link to login.html
      });
// ------------------ Interactive Petr Sticker Calendar ------------------
      (function() {
        const calendarDiv = document.getElementById('calendar');
        const calendarTableDiv = document.getElementById('calendarTable');
        const calendarTitle = document.getElementById('calendarTitle');
        const prevBtn = document.getElementById('prevMonth');
        const nextBtn = document.getElementById('nextMonth');

        let today = new Date();
        let displayMonth = today.getMonth();
        let displayYear = today.getFullYear();

        // Mock Petr sticker drops with times
        const mockDrops = {
          '2025-11-3': { name: "Alpha Petr", time: "12:00 PM" },
          '2025-11-7': { name: "Beta Petr", time: "3:30 PM" },
          '2025-11-12': { name: "Mystery Petr", time: "11:45 AM" },
          '2025-11-15': { name: "Gamma Petr", time: "2:15 PM" },
          '2025-11-19': { name: "Surprise Petr", time: "4:20 PM" },
          '2025-11-22': { name: "Delta Petr", time: "1:00 PM" },
          '2025-11-25': { name: "Holiday Petr", time: "12:30 PM" },
          '2025-11-28': { name: "Epsilon Petr", time: "3:00 PM" },
          '2025-12-2': { name: "Winter Petr", time: "2:45 PM" },
          '2025-12-5': { name: "Zeta Petr", time: "11:30 AM" },
          '2025-12-9': { name: "Finals Petr", time: "1:15 PM" },
          '2025-12-15': { name: "Snowflake Petr", time: "4:00 PM" },
          '2026-1-8': { name: "New Year Petr", time: "12:00 PM" },
          '2026-1-12': { name: "Eta Petr", time: "2:30 PM" },
          '2026-1-16': { name: "Cozy Petr", time: "3:45 PM" },
          '2026-1-22': { name: "Study Petr", time: "1:30 PM" },
          '2026-2-5': { name: "Valentine Petr", time: "2:00 PM" },
          '2026-2-14': { name: "Love Petr", time: "11:00 AM" },
          '2026-2-18': { name: "Theta Petr", time: "3:15 PM" },
          '2026-2-25': { name: "Spring Petr", time: "12:45 PM" }
        };

        function getQuarter(month) {
          if (month >= 8 && month <= 10) return 'fall';      // Sep-Nov
          else if (month === 11 || month <= 1) return 'winter'; // Dec-Feb
          else if (month >= 2 && month <= 4) return 'spring';  // Mar-May
          else return 'summer';                                // Jun-Aug
        }

        function renderCalendar(month, year) {
          // Update border gradient based on quarter
          const quarterClass = getQuarter(month);
          calendarDiv.className = `calendar ${quarterClass}`;
          
          // Update separator gradient
          const separator = document.querySelector('.separator');
          separator.className = `separator ${quarterClass}`;

          // Update title
          const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
          calendarTitle.textContent = `${monthNames[month]} ${year}`;

          // Build table
          const days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
          const daysInMonth = new Date(year, month + 1, 0).getDate();
          const firstDay = new Date(year, month, 1).getDay();

          let table = '<table><tr>';
          days.forEach(day => table += `<th>${day}</th>`);
          table += '</tr><tr>';

          for(let i=0;i<firstDay;i++) table += '<td></td>';

          for(let day=1; day<=daysInMonth; day++){
            const dateKey = `${year}-${month+1}-${day}`;
            if(mockDrops[dateKey]) {
              const delay = Math.random() * 0.5; // random bounce delay
              const confetti = Array.from({length: 12}).map(() => {
                const x = Math.random() * 80 + 10; // 10%-90%
                const y = Math.random() * 80 + 10;
                const colors = [
                  '#FFD700', // gold
                  '#FF4500', // red-orange
                  '#32CD32', // lime
                  '#1E90FF', // dodger blue
                  '#FF69B4', // hot pink
                  '#9370DB', // medium purple
                  '#00CED1', // dark turquoise
                  '#FFA500'  // orange
                ];
                const color = colors[Math.floor(Math.random()*colors.length)];
                const delay = (Math.random() * 2).toFixed(2);
                const size = Math.random() * 4 + 3; // 3-7px
                const duration = (Math.random() * 1 + 2).toFixed(2); // 2-3s
                return `<span style="
                          position: absolute;
                          width: ${size}px;
                          height: ${size}px;
                          border-radius: 50%;
                          background: ${color};
                          box-shadow: 0 0 ${size/2}px ${color}80;
                          top: ${y}%;
                          left: ${x}%;
                          animation: confettiFloat ${duration}s infinite ease-in-out;
                          animation-delay: ${delay}s;
                          opacity: 0;
                          z-index: 1;
                        "></span>`;
              }).join('');

              
              table += `<td class="drop" style="position:relative;">
                          ${confetti}
                          <img src="attached_assets/sticker-icon.png" alt="Petr sticker" style="animation-delay:${delay}s;">
                          <div class="drop-date">${day}</div>
                          <div class="drop-name">${mockDrops[dateKey].name}</div>
                          <div class="drop-time">${mockDrops[dateKey].time}</div>
                        </td>`;
            } else {
              table += `<td>${day}</td>`;
            }



            if((day + firstDay) % 7 === 0) table += '</tr><tr>';
          }

          // Close any open row and the table
          table += '</tr></table>';
          calendarTableDiv.innerHTML = table;
        }

        prevBtn.addEventListener('click', function() {
          displayMonth--;
          if(displayMonth < 0){
            displayMonth = 11;
            displayYear--;
          }
          renderCalendar(displayMonth, displayYear);
        });

        nextBtn.addEventListener('click', function() {
          displayMonth++;
          if(displayMonth > 11){
            displayMonth = 0;
            displayYear++;
          }
          renderCalendar(displayMonth, displayYear);
        });

        renderCalendar(displayMonth, displayYear);
      })();

    </script>
  </body>
</html>
